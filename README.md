# LOLA - (L)inux (O)n (L)ua (A)utobuilder by GiWiG (c) 2022
***



В общем я брал, за шаблон, пакетный менеджер 'pacman' и его скрипты для сборки пакетов.
TODO:
	-	перераюотать этот файл 'README.md'.
	-	поработать над структурой исходников и наиманованиями, что-бы было более понятно что и где находится.
		Сейчас файлы с преыиксом 'cpp_' содержат С/C++ функции.
		Файлы с префиксом 'lua_' содержат функции, которые передаются в lua, для внутреннего испольхования.
		Файлы с префиксом 'm_'   содержат главные функции программы, к томуже в этих файлах находятся вспомогаьельные классы, которые нужно будет вынести
		под другой префикс типа 'plugin_'.
	-	Нужно нарисовать "UML" схему, как будет работать сам сборщик линуксов.


описание файла LPAC:
	Файл 'LPAC' имеет в себе следующую структуру данных. Внутри файла используется язык 'LUA'.
	
	Главный файл lpac содержит в себе глобальные настройки для сборки системы. 
	Например:
		'env_global'	-	переменные в среде 'Environment' для настройки сборки, типа LFS и LFS_TGT.
		'lpacs' 		-	это список пакетов, которые собираются последовательно, по списку.
		'src_dir'		-	папка куда загружаются исходники пакетов.
		'tol_dir'		-	папка где собираются пакеты.
			TODO		-	стоит переименовать в 'build_dir' или что-то подобное.


	Переменные в 'LUA'-файлах:
		- pkgname 	= имя пакета. Например 'm4'.
		- pkgver 	= версия пакета.
		- pkgrel	= сборка пакета.
		- pkgsource	= список с исходниками которые загружаются функцией 'pkg_download' в папку 'tol_dir'.
		- *sums*	= различные хэш-суммы нп. sha256, sha512, md5, ...
		
	Функции для сборки пакетов:
		Каждая из функция вызывается последовательно. Первые две функции pkg_download и pkg_extract
		имеют внутринии аналоги и не нуждваются в вызове. Остальные функции просто вызываются последовательно.
		
		- pkg_download		=	функция для загрузки пакета. если функция была определена, то внутренея функция
								не используется.
		- pkg_extract		=	функция используется для распаковки пакета в папку, которая 
								определена в переменной 'tol_dir'. Если переопределить эту функцию, то внутреняя
								функция не будет вызвана.
		- pkg_prepare		=	функция для конфигурации пакета.
		- pkg_build		=	функция для сборки пакета.
		- pkg_install		= 	функция для установки пакета в определённое место.
		- pkg_package		=	функция для упаковки пакета.
								TODO: надо сделать общии функции для упаковки пакетов
		
	Вспомогательные lua-функции:
		Коммандные функции:
			- cpp_bash			=	вызывает команду системную комманду 'system()'.
			- cpp_chroot		=	переход в chroot() указанной папки.
			- cpp_ls			= 	дает список файлов в папке. очень помогает, так как 
									в chroot() может не быть функции 'ls'. Возвращает назад список файлов и папок. 
			- cpp_pwd			=	возвращает назад папку, в которой мы сейчас находимся.
			- cpp_is_file		=	проверят путь true  = файл; false = папка.
			- cpp_is_dir		=	проверят путь false = файл; true  = папка.

			- cpp_set_env		=	записывает переменную
			- cpp_get_env		=	вычитывает переменную
			- cpp_del_env		=	стирает переменную
			- cpp_clear_env	=	стирает все вариаблы в списке.

			- cpp_sha256file	= 	хэш файла sha56







